<script type="text/javascript" src="https://static-hamivideo.cdn.hinet.net/resources/js/jquery-3.5.1.min.js"></script>

<script>
function speech(){
	try {
		$.ajax({
			type : 'get',
			data :{},
			cache : false,
			url : 'speech_captcha.html',
			async : false,
			dataType: "text",
			success : function(response) {
				if(response!==""){
					alert(response);
					audio(response);
				}else{
					alert("no response");	
				}
			},error: function( jqXHR, textStatus, errorThrown ){
				console.log(jqXHR+'/'+textStatus+'/'+errorThrown);
				alert(jqXHR+'/'+textStatus+'/'+errorThrown)
			},
			beforeSend: function( jqXHR, settings ){
				//loadingToggle(needOverLay);
				
			},
			complete: function( jqXHR, textStatus ){
				//loadingToggle(needOverLay);
			}
	      });
	      }catch (err) {
		      alert(err);
	      }
}



function test(){
	console.log("testing");
	document.addEventListener('click', audio("abc"));
}
function audio(word){
	var to_speak = new SpeechSynthesisUtterance(word);
	console.log(to_speak);
	to_speak.rate = 0.7;
	window.speechSynthesis.speak(to_speak);
	console.log("audio");
}

//setTimeout(test, 2000);
</script>
<a href="javascript:void(0)" class="reload_captcha" onclick="speech()">語音播放</a>
<input type="button" value="播放" onclick="audio(abcdef)">

